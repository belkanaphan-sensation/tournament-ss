Создаем мероприятие Occasion (доступные состояния PLANNED, IN_PROGRESS, COMPLETED)

В нем создаем активность Activity (доступные состояния PLANNED, REGISTRATION_CLOSED, IN_PROGRESS, SUMMARIZING, COMPLETED)
(допустимые состояния мероприятия для создания активности: PLANNED, IN_PROGRESS, недопустимые: COMPLETED)

В ней создаем этапы Milestone (доступные состояния DRAFT, PLANNED, PENDING, IN_PROGRESS,
SUMMARIZING, COMPLETED, SKIPPED) от финала (порядковый номер 0) до отборочного. Т.е. этапы должны создаваться в определенной последовательности от последнего к первому
(допустимые состояния активности для создания этапа: PLANNED)

Создаем правила для этапов. MilestoneRule.
Создаем Критерии для MilestoneRule - MilestoneCriterionEntity
(допустимые состояния этапа: DRAFT).
Этап не может быть переведен в PLANNED если у него отсутствует MilestoneRule или у правила не определен хотя бы один критерий или Activity в COMPLETED.
Т.е. нужна следующая последовательность
активность(PLANNED)-создаем этапы(DRAFT), правила этапа, критерии правил этапа - этапы (PLANNED)

Создаем участников активности. Participant ParticipantController.create
Регистрируем участников с присваиванием номера. ParticipantController.registerParticipant
Когда регистратор зарегистрировал всех участников (как ему кажется) то активность(REGISTRATION_CLOSED)
В этот момент Зарегистрированные (отмеченные) участники формируются в конкурсантов и привязываются к крайнему нескипнутому этапу активности.
Этап, пока он не начат (DRAFT, PLANNED, PENDING), может быть скипнут, тогда если в нем были конкурсанты, то они перенесутся в следующий этап.

Далее активность должна быть переведена в IN_PROGRESS и тогда можно генерировать раунды этапа - PREPARE_ROUNDS (этап перейдет в PENDING), создадутся раунды в состоянии OPENED
Раунды создадутся если только в этапе есть конкурсанты.
Также формируются JudgeRoundStatus (NOT_READY), JudgeMilestoneStatus (NOT_READY)
Пока не начат этап, туда могут быть добавлены конкурсанты(ContestantController.create) и раунды могут быть перегенерированы (MilestoneController.regenerateRoundsForMilestone)

Далее старт 1 этап (IN_PROGRESS)
Сохраняем JudgeMilestoneResult для раунда. Пока этап не завершен, судья может менять результаты.
Когда все основные раунды этапа оценены, можно посчитать результаты этапа (MilestoneController.sumUpMilestone) (MilestoneState SUMMARIZING)
Здесь формируются результаты этапа MilestoneResultEntity и раунды переходят в состояние CLOSED - их больше нельзя редактировать.
Далее может быть создан перетанцовочный раунд и этап снова возвращен в IN_PROGRESS или результаты приняты и этап завершен (COMPLETED).
После перехода этапа в COMPLETED, конкурсанты прошедшие по его результатам переносятся в следующий этап и так далее.

Активность может быть переведена в подведение итогов (SUMMARIZING) а потом в завершение (COMPLETED), когда все этапы COMPLETED


