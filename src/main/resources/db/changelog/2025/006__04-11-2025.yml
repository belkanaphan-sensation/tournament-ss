databaseChangeLog:
  # Create milestone_round_result table
  - changeSet:
      id: 2025-11-04-1
      author: belkanaphan
      context: prod
      onFail: MARK_RAN
      changes:
        - sql:
            sql: |
              CREATE TABLE IF NOT EXISTS milestone_round_result (
                id BIGSERIAL PRIMARY KEY,
                total_score DECIMAL(10,2),
                judge_passed VARCHAR(255) NOT NULL,
                round_id BIGINT NOT NULL,
                milestone_result_id BIGINT NOT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                created_by VARCHAR(255),
                modified_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                modified_by VARCHAR(255),
                FOREIGN KEY (milestone_result_id) REFERENCES milestone_result(id) ON DELETE CASCADE,
                FOREIGN KEY (round_id) REFERENCES round(id) ON DELETE CASCADE
              );
      rollback:
        - sql:
            sql: |
              DROP TABLE IF EXISTS milestone_round_result;
