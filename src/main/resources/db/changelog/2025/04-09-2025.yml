databaseChangeLog:
  # Create roles
  - changeSet:
      id: 2025-09-04-1
      author: belkanaphan
      onFail: MARK_RAN
      changes:
        - sql:
            sql: |
              INSERT INTO role (role, created_at, version) 
              SELECT 'SUPERADMIN', NOW(), 0 
              WHERE NOT EXISTS (SELECT 1 FROM role WHERE role.role = 'SUPERADMIN');
              
              INSERT INTO role (role, created_at, version) 
              SELECT 'ADMIN', NOW(), 0 
              WHERE NOT EXISTS (SELECT 1 FROM role WHERE role.role = 'ADMIN');
              
              INSERT INTO role (role, created_at, version) 
              SELECT 'OCCASION_ADMIN', NOW(), 0 
              WHERE NOT EXISTS (SELECT 1 FROM role WHERE role.role = 'OCCASION_ADMIN');
              
              INSERT INTO role (role, created_at, version) 
              SELECT 'USER', NOW(), 0 
              WHERE NOT EXISTS (SELECT 1 FROM role WHERE role.role = 'USER');
              
              INSERT INTO role (role, created_at, version) 
              SELECT 'READER', NOW(), 0 
              WHERE NOT EXISTS (SELECT 1 FROM role WHERE role.role = 'READER');
      rollback:
        - sql:
            sql: |
              DELETE FROM role WHERE role IN ('SUPERADMIN', 'ADMIN', 'OCCASION_ADMIN', 'USER', 'READER');
