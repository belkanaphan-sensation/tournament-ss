databaseChangeLog:
#  # Test data for activity_result
#  - changeSet:
#      id: 2025-09-25-1
#      author: belkanaphan
#      changes:
#        - sql:
#            sql: |
#              INSERT INTO activity_result (total_score, place, participant_id, created_at, created_by, modified_at, modified_by, version) VALUES
#              -- Результаты для участников организации 1 (6 участников)
#              (85, 1, (SELECT id FROM participant WHERE number = 'P-001'), '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0),
#              (82, 2, (SELECT id FROM participant WHERE number = 'P-001-2'), '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0),
#              (80, 3, (SELECT id FROM participant WHERE number = 'P-001-3'), '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0),
#              (78, 4, (SELECT id FROM participant WHERE number = 'P-001-4'), '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0),
#              (76, 5, (SELECT id FROM participant WHERE number = 'P-001-5'), '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0),
#              (74, 6, (SELECT id FROM participant WHERE number = 'P-001-6'), '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0),
#
#              -- Результаты для участников организации 2 (3 участника)
#              (92, 1, (SELECT id FROM participant WHERE number = 'P-002-1'), '2025-09-25 10:00:00', 'judge2_1', '2025-09-25 10:00:00', 'judge2_1', 0),
#              (78, 3, (SELECT id FROM participant WHERE number = 'P-002-2'), '2025-09-25 10:00:00', 'judge2_1', '2025-09-25 10:00:00', 'judge2_1', 0),
#              (88, 2, (SELECT id FROM participant WHERE number = 'P-002-3'), '2025-09-25 10:00:00', 'judge2_1', '2025-09-25 10:00:00', 'judge2_1', 0),
#
#              -- Результаты для участников организации 3 (6 участников)
#              (95, 1, (SELECT id FROM participant WHERE number = 'P-003-1'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0),
#              (82, 5, (SELECT id FROM participant WHERE number = 'P-003-2'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0),
#              (90, 2, (SELECT id FROM participant WHERE number = 'P-003-3'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0),
#              (76, 6, (SELECT id FROM participant WHERE number = 'P-003-4'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0),
#              (87, 3, (SELECT id FROM participant WHERE number = 'P-003-5'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0),
#              (81, 4, (SELECT id FROM participant WHERE number = 'P-003-6'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0);

#  # Test data for milestone_result
#  - changeSet:
#      id: 2025-09-25-2
#      author: belkanaphan
#      changes:
#        - sql:
#            sql: |
#              INSERT INTO milestone_result (total_score, participant_id, milestone_id, created_at, created_by, modified_at, modified_by, version) VALUES
#              -- Результаты для участников организации 1 по этапу 1
#              (85, (SELECT id FROM participant WHERE number = 'P-001'), (SELECT id FROM milestone WHERE name = 'Этап 1'), '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0),
#              (82, (SELECT id FROM participant WHERE number = 'P-001-2'), (SELECT id FROM milestone WHERE name = 'Этап 1'), '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0),
#              (80, (SELECT id FROM participant WHERE number = 'P-001-3'), (SELECT id FROM milestone WHERE name = 'Этап 1'), '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0),
#              (78, (SELECT id FROM participant WHERE number = 'P-001-4'), (SELECT id FROM milestone WHERE name = 'Этап 1'), '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0),
#              (76, (SELECT id FROM participant WHERE number = 'P-001-5'), (SELECT id FROM milestone WHERE name = 'Этап 1'), '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0),
#              (74, (SELECT id FROM participant WHERE number = 'P-001-6'), (SELECT id FROM milestone WHERE name = 'Этап 1'), '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0),
#
#              -- Результаты для участников организации 2 по этапам 2.1.1 и 2.1.2
#              (45, (SELECT id FROM participant WHERE number = 'P-002-1'), (SELECT id FROM milestone WHERE name = 'Этап 2.1.1'), '2025-09-25 10:00:00', 'judge2_1', '2025-09-25 10:00:00', 'judge2_1', 0),
#              (47, (SELECT id FROM participant WHERE number = 'P-002-1'), (SELECT id FROM milestone WHERE name = 'Этап 2.1.2'), '2025-09-25 10:00:00', 'judge2_1', '2025-09-25 10:00:00', 'judge2_1', 0),
#              (38, (SELECT id FROM participant WHERE number = 'P-002-2'), (SELECT id FROM milestone WHERE name = 'Этап 2.1.1'), '2025-09-25 10:00:00', 'judge2_1', '2025-09-25 10:00:00', 'judge2_1', 0),
#              (40, (SELECT id FROM participant WHERE number = 'P-002-2'), (SELECT id FROM milestone WHERE name = 'Этап 2.1.2'), '2025-09-25 10:00:00', 'judge2_1', '2025-09-25 10:00:00', 'judge2_1', 0),
#              (44, (SELECT id FROM participant WHERE number = 'P-002-3'), (SELECT id FROM milestone WHERE name = 'Этап 2.1.1'), '2025-09-25 10:00:00', 'judge2_1', '2025-09-25 10:00:00', 'judge2_1', 0),
#              (44, (SELECT id FROM participant WHERE number = 'P-002-3'), (SELECT id FROM milestone WHERE name = 'Этап 2.1.2'), '2025-09-25 10:00:00', 'judge2_1', '2025-09-25 10:00:00', 'judge2_1', 0),
#
#              -- Результаты для участников организации 3 по этапам 3.1.1, 3.1.2, 3.1.3
#              (48, (SELECT id FROM participant WHERE number = 'P-003-1'), (SELECT id FROM milestone WHERE name = 'Этап 3.1.1'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0),
#              (47, (SELECT id FROM participant WHERE number = 'P-003-1'), (SELECT id FROM milestone WHERE name = 'Этап 3.1.2'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0),
#              (41, (SELECT id FROM participant WHERE number = 'P-003-2'), (SELECT id FROM milestone WHERE name = 'Этап 3.1.1'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0),
#              (41, (SELECT id FROM participant WHERE number = 'P-003-2'), (SELECT id FROM milestone WHERE name = 'Этап 3.1.2'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0),
#              (45, (SELECT id FROM participant WHERE number = 'P-003-3'), (SELECT id FROM milestone WHERE name = 'Этап 3.1.1'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0),
#              (45, (SELECT id FROM participant WHERE number = 'P-003-3'), (SELECT id FROM milestone WHERE name = 'Этап 3.1.2'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0),
#              (38, (SELECT id FROM participant WHERE number = 'P-003-4'), (SELECT id FROM milestone WHERE name = 'Этап 3.1.1'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0),
#              (38, (SELECT id FROM participant WHERE number = 'P-003-4'), (SELECT id FROM milestone WHERE name = 'Этап 3.1.2'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0),
#              (43, (SELECT id FROM participant WHERE number = 'P-003-5'), (SELECT id FROM milestone WHERE name = 'Этап 3.1.1'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0),
#              (44, (SELECT id FROM participant WHERE number = 'P-003-5'), (SELECT id FROM milestone WHERE name = 'Этап 3.1.2'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0),
#              (40, (SELECT id FROM participant WHERE number = 'P-003-6'), (SELECT id FROM milestone WHERE name = 'Этап 3.1.1'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0),
#              (41, (SELECT id FROM participant WHERE number = 'P-003-6'), (SELECT id FROM milestone WHERE name = 'Этап 3.1.2'), '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0);

  # Test data for judge_milestone_result
  - changeSet:
      id: 2025-09-25-3
      author: system
      context: test_data
      changes:
        - sql:
            sql: |
              INSERT INTO judge_milestone_result (score, participant_id, round_id, milestone_criteria_id, activity_user_id, created_at, created_by, modified_at, modified_by, version, favorite) VALUES
              -- Результаты для участников организации 1 по раунду 1.1 с разными критериями и судьями
              (10, (SELECT id FROM participant WHERE number = 'P-001'), (SELECT id FROM round WHERE name = 'Раунд 1.1'), 
                   (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Прохождение') AND mca.partner_side IS NULL), 
                   (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge1_1' LIMIT 1), 
                   '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0, true),
              (8, (SELECT id FROM participant WHERE number = 'P-001'), (SELECT id FROM round WHERE name = 'Раунд 1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Техника') AND mca.partner_side = 'LEADER'), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge1_1' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0, false),
              (9, (SELECT id FROM participant WHERE number = 'P-001'), (SELECT id FROM round WHERE name = 'Раунд 1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Техника') AND mca.partner_side = 'FOLLOWER'), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge1_2' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge1_2', '2025-09-25 10:00:00', 'judge1_2', 0, false),
              (7, (SELECT id FROM participant WHERE number = 'P-001'), (SELECT id FROM round WHERE name = 'Раунд 1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Ведение') AND mca.partner_side = 'LEADER'), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge1_1' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0, false),
              (8, (SELECT id FROM participant WHERE number = 'P-001'), (SELECT id FROM round WHERE name = 'Раунд 1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Стилистика') AND mca.partner_side = 'FOLLOWER'), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge1_2' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge1_2', '2025-09-25 10:00:00', 'judge1_2', 0, false),
              (9, (SELECT id FROM participant WHERE number = 'P-001'), (SELECT id FROM round WHERE name = 'Раунд 1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Музыкальность') AND mca.partner_side IS NULL), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge1_1' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0, false),
              (8, (SELECT id FROM participant WHERE number = 'P-001'), (SELECT id FROM round WHERE name = 'Раунд 1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Следование') AND mca.partner_side = 'LEADER'), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge1_1' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0, false),
              (8, (SELECT id FROM participant WHERE number = 'P-001'), (SELECT id FROM round WHERE name = 'Раунд 1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Имидж') AND mca.partner_side IS NULL), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge1_2' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge1_2', '2025-09-25 10:00:00', 'judge1_2', 0, false),
              
              -- Результаты для участника P-001-2 по раунду 1.1
              (9, (SELECT id FROM participant WHERE number = 'P-001-2'), (SELECT id FROM round WHERE name = 'Раунд 1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Прохождение') AND mca.partner_side IS NULL), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge1_1' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0, false),
              (7, (SELECT id FROM participant WHERE number = 'P-001-2'), (SELECT id FROM round WHERE name = 'Раунд 1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Техника') AND mca.partner_side = 'FOLLOWER'), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge1_2' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge1_2', '2025-09-25 10:00:00', 'judge1_2', 0, false),
              (8, (SELECT id FROM participant WHERE number = 'P-001-2'), (SELECT id FROM round WHERE name = 'Раунд 1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Стилистика') AND mca.partner_side = 'FOLLOWER'), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge1_2' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge1_2', '2025-09-25 10:00:00', 'judge1_2', 0, false),
              (8, (SELECT id FROM participant WHERE number = 'P-001-2'), (SELECT id FROM round WHERE name = 'Раунд 1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Музыкальность') AND mca.partner_side IS NULL), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge1_1' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge1_1', '2025-09-25 10:00:00', 'judge1_1', 0, false),
              (7, (SELECT id FROM participant WHERE number = 'P-001-2'), (SELECT id FROM round WHERE name = 'Раунд 1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Имидж') AND mca.partner_side IS NULL), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge1_2' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge1_2', '2025-09-25 10:00:00', 'judge1_2', 0, false),
              
              -- Результаты для участников организации 2 по раунду 2.1.1.1
              (9, (SELECT id FROM participant WHERE number = 'P-002-1'), (SELECT id FROM round WHERE name = 'Раунд 2.1.1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 2.1.1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Прохождение') AND mca.partner_side IS NULL), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge2_1' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge2_1', '2025-09-25 10:00:00', 'judge2_1', 0, false),
              (8, (SELECT id FROM participant WHERE number = 'P-002-1'), (SELECT id FROM round WHERE name = 'Раунд 2.1.1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 2.1.1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Техника') AND mca.partner_side = 'LEADER'), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge2_1' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge2_1', '2025-09-25 10:00:00', 'judge2_1', 0, false),
              (7, (SELECT id FROM participant WHERE number = 'P-002-1'), (SELECT id FROM round WHERE name = 'Раунд 2.1.1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 2.1.1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Ведение') AND mca.partner_side IS NULL), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge2_2' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge2_2', '2025-09-25 10:00:00', 'judge2_2', 0, false),
              (8, (SELECT id FROM participant WHERE number = 'P-002-1'), (SELECT id FROM round WHERE name = 'Раунд 2.1.1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 2.1.1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Стилистика') AND mca.partner_side = 'FOLLOWER'), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge2_2' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge2_2', '2025-09-25 10:00:00', 'judge2_2', 0, false),
              (9, (SELECT id FROM participant WHERE number = 'P-002-1'), (SELECT id FROM round WHERE name = 'Раунд 2.1.1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 2.1.1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Музыкальность') AND mca.partner_side IS NULL), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge2_3' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge2_3', '2025-09-25 10:00:00', 'judge2_3', 0, false),
              (8, (SELECT id FROM participant WHERE number = 'P-002-1'), (SELECT id FROM round WHERE name = 'Раунд 2.1.1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 2.1.1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Следование') AND mca.partner_side = 'LEADER'), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge2_1' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge2_1', '2025-09-25 10:00:00', 'judge2_1', 0, false),
              (8, (SELECT id FROM participant WHERE number = 'P-002-1'), (SELECT id FROM round WHERE name = 'Раунд 2.1.1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 2.1.1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Имидж') AND mca.partner_side IS NULL), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge2_3' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge2_3', '2025-09-25 10:00:00', 'judge2_3', 0, false),
              
              -- Результаты для участника организации 3 по раунду 3.1.1.1
              (10, (SELECT id FROM participant WHERE number = 'P-003-1'), (SELECT id FROM round WHERE name = 'Раунд 3.1.1.1'), 
                   (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 3.1.1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Прохождение') AND mca.partner_side IS NULL), 
                   (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge3_1' LIMIT 1), 
                   '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0, false),
              (9, (SELECT id FROM participant WHERE number = 'P-003-1'), (SELECT id FROM round WHERE name = 'Раунд 3.1.1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 3.1.1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Техника') AND mca.partner_side = 'LEADER'), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge3_1' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0, false),
              (8, (SELECT id FROM participant WHERE number = 'P-003-1'), (SELECT id FROM round WHERE name = 'Раунд 3.1.1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 3.1.1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Техника') AND mca.partner_side = 'FOLLOWER'), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge3_2' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge3_2', '2025-09-25 10:00:00', 'judge3_2', 0, false),
              (9, (SELECT id FROM participant WHERE number = 'P-003-1'), (SELECT id FROM round WHERE name = 'Раунд 3.1.1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 3.1.1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Ведение') AND mca.partner_side IS NULL), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge3_3' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge3_3', '2025-09-25 10:00:00', 'judge3_3', 0, false),
              (9, (SELECT id FROM participant WHERE number = 'P-003-1'), (SELECT id FROM round WHERE name = 'Раунд 3.1.1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 3.1.1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Стилистика') AND mca.partner_side = 'FOLLOWER'), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge3_2' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge3_2', '2025-09-25 10:00:00', 'judge3_2', 0, false),
              (10, (SELECT id FROM participant WHERE number = 'P-003-1'), (SELECT id FROM round WHERE name = 'Раунд 3.1.1.1'), 
                   (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 3.1.1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Музыкальность') AND mca.partner_side IS NULL), 
                   (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge3_3' LIMIT 1), 
                   '2025-09-25 10:00:00', 'judge3_3', '2025-09-25 10:00:00', 'judge3_3', 0, false),
              (9, (SELECT id FROM participant WHERE number = 'P-003-1'), (SELECT id FROM round WHERE name = 'Раунд 3.1.1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 3.1.1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Следование') AND mca.partner_side = 'LEADER'), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge3_1' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge3_1', '2025-09-25 10:00:00', 'judge3_1', 0, false),
              (9, (SELECT id FROM participant WHERE number = 'P-003-1'), (SELECT id FROM round WHERE name = 'Раунд 3.1.1.1'), 
                  (SELECT mca.id FROM milestone_criteria_assignment mca JOIN milestone_rule mr ON mca.milestone_rule_id = mr.id JOIN milestone m ON mr.milestone_id = m.id WHERE m.name = 'Этап 3.1.1' AND mca.criteria_id = (SELECT id FROM criteria WHERE name = 'Имидж') AND mca.partner_side IS NULL), 
                  (SELECT uaa.id FROM user_activity_assignment uaa JOIN users u ON uaa.user_id = u.id WHERE u.username = 'judge3_3' LIMIT 1), 
                  '2025-09-25 10:00:00', 'judge3_3', '2025-09-25 10:00:00', 'judge3_3', 0, false);

  # Fix sequences to avoid ID conflicts
  - changeSet:
      id: 2025-09-25-0
      author: system
      context: test_data
      changes:
        - sql:
            sql: |
              -- Обновляем последовательности для таблиц результатов, чтобы избежать конфликтов ID
              -- PostgreSQL автоматически создает последовательности для SERIAL/BIGSERIAL полей
              -- Используем GREATEST для гарантии, что значение не меньше 1
              
              -- Для activity_result
              SELECT setval('activity_result_id_seq', GREATEST(COALESCE((SELECT MAX(id) FROM activity_result), 0), 1));
              
              -- Для milestone_result
              SELECT setval('milestone_result_id_seq', GREATEST(COALESCE((SELECT MAX(id) FROM milestone_result), 0), 1));
              
              -- Для judge_milestone_result
              SELECT setval('judge_milestone_result_id_seq', GREATEST(COALESCE((SELECT MAX(id) FROM judge_milestone_result), 0), 1));
