databaseChangeLog:
  # Test data for rounds
  - changeSet:
      id: 2025-10-08-13
      author: system
      context: test_data
      changes:
        - sql:
            sql: |
              INSERT INTO round (name, state, milestone_id, extra_round, round_order, created_at, created_by, modified_at, modified_by) VALUES
              -- Этап 1: 5 раундов
              ('Раунд 1', 'IN_PROGRESS', (SELECT id FROM milestone WHERE name = 'Отборочный'), false, 0, '2025-10-01 10:00:00', 'org1_admin', '2025-10-01 10:00:00', 'org1_admin'),
              ('Раунд 2', 'IN_PROGRESS', (SELECT id FROM milestone WHERE name = 'Отборочный'), false, 1, '2025-10-01 10:00:00', 'org1_admin', '2025-10-01 10:00:00', 'org1_admin'),

              -- Этап 2: 3 раунда
              ('Раунд 1', 'IN_PROGRESS', (SELECT id FROM milestone WHERE name = 'Полуфинал'), false, 0, '2025-10-01 10:00:00', 'org1_admin', '2025-10-01 10:00:00', 'org1_admin'),
              ('Раунд 2', 'IN_PROGRESS', (SELECT id FROM milestone WHERE name = 'Полуфинал'), false, 1, '2025-10-01 10:00:00', 'org1_admin', '2025-10-01 10:00:00', 'org1_admin'),

              -- Этап 3: 2 раунда
              ('Раунд 1', 'IN_PROGRESS', (SELECT id FROM milestone WHERE name = 'Финал'), false, 0, '2025-10-01 10:00:00', 'org1_admin', '2025-10-01 10:00:00', 'org1_admin');

  # Test data for milestones_participants_association with progressive selection
  - changeSet:
      id: 2025-10-08-14
      author: system
      context: test_data
      changes:
        - sql:
            sql: |
              INSERT INTO milestones_participants_association (participant_id, milestone_id) VALUES
              -- Раунд 1.1: 5 пар
              ((SELECT id FROM participant WHERE number = '001-L'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '002-L'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '003-L'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '004-L'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '005-L'), (select id from milestone where name = 'Отборочный')),

              ((SELECT id FROM participant WHERE number = '001-F'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '002-F'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '003-F'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '004-F'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '005-F'), (select id from milestone where name = 'Отборочный')),

              -- Раунд 2: 5 пар на оценку и 2 парнерши с ассистентами
              ((SELECT id FROM participant WHERE number = '006-L'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '007-L'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '008-L'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '009-L'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '010-L'), (select id from milestone where name = 'Отборочный')),

              ((SELECT id FROM participant WHERE number = '006-F'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '007-F'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '008-F'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '009-F'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '010-F'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '011-F'), (select id from milestone where name = 'Отборочный')),
              ((SELECT id FROM participant WHERE number = '012-F'), (select id from milestone where name = 'Отборочный')),

              ((SELECT id FROM participant WHERE number = '001-L'), (select id from milestone where name = 'Финал')),
              ((SELECT id FROM participant WHERE number = '002-L'), (select id from milestone where name = 'Финал')),
              ((SELECT id FROM participant WHERE number = '003-L'), (select id from milestone where name = 'Финал')),
              ((SELECT id FROM participant WHERE number = '004-L'), (select id from milestone where name = 'Финал')),
              ((SELECT id FROM participant WHERE number = '005-L'), (select id from milestone where name = 'Финал')),

              ((SELECT id FROM participant WHERE number = '001-F'), (select id from milestone where name = 'Финал')),
              ((SELECT id FROM participant WHERE number = '002-F'), (select id from milestone where name = 'Финал')),
              ((SELECT id FROM participant WHERE number = '003-F'), (select id from milestone where name = 'Финал')),
              ((SELECT id FROM participant WHERE number = '004-F'), (select id from milestone where name = 'Финал')),
              ((SELECT id FROM participant WHERE number = '005-F'), (select id from milestone where name = 'Финал'));

  # Test data for rounds_participants_association with progressive selection
  - changeSet:
      id: 2025-10-08-15
      author: system
      context: test_data
      changes:
        - sql:
            sql: |
              INSERT INTO rounds_participants_association (participant_id, round_id) VALUES
              -- Раунд 1.1: 5 пар
              ((SELECT id FROM participant WHERE number = '001-L'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '002-L'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '003-L'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '004-L'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '005-L'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Отборочный'))),

              ((SELECT id FROM participant WHERE number = '001-F'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '002-F'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '003-F'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '004-F'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '005-F'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Отборочный'))),

              -- Раунд 2: 5 пар на оценку и 2 парнерши с ассистентами
              ((SELECT id FROM participant WHERE number = '006-L'), (SELECT id FROM round WHERE name = 'Раунд 2' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '007-L'), (SELECT id FROM round WHERE name = 'Раунд 2' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '008-L'), (SELECT id FROM round WHERE name = 'Раунд 2' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '009-L'), (SELECT id FROM round WHERE name = 'Раунд 2' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '010-L'), (SELECT id FROM round WHERE name = 'Раунд 2' and milestone_id = (select id from milestone where name = 'Отборочный'))),

              ((SELECT id FROM participant WHERE number = '006-F'), (SELECT id FROM round WHERE name = 'Раунд 2' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '007-F'), (SELECT id FROM round WHERE name = 'Раунд 2' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '008-F'), (SELECT id FROM round WHERE name = 'Раунд 2' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '009-F'), (SELECT id FROM round WHERE name = 'Раунд 2' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '010-F'), (SELECT id FROM round WHERE name = 'Раунд 2' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '011-F'), (SELECT id FROM round WHERE name = 'Раунд 2' and milestone_id = (select id from milestone where name = 'Отборочный'))),
              ((SELECT id FROM participant WHERE number = '012-F'), (SELECT id FROM round WHERE name = 'Раунд 2' and milestone_id = (select id from milestone where name = 'Отборочный'))),

              ((SELECT id FROM participant WHERE number = '001-L'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Финал'))),
              ((SELECT id FROM participant WHERE number = '002-L'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Финал'))),
              ((SELECT id FROM participant WHERE number = '003-L'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Финал'))),
              ((SELECT id FROM participant WHERE number = '004-L'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Финал'))),
              ((SELECT id FROM participant WHERE number = '005-L'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Финал'))),

              ((SELECT id FROM participant WHERE number = '001-F'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Финал'))),
              ((SELECT id FROM participant WHERE number = '002-F'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Финал'))),
              ((SELECT id FROM participant WHERE number = '003-F'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Финал'))),
              ((SELECT id FROM participant WHERE number = '004-F'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Финал'))),
              ((SELECT id FROM participant WHERE number = '005-F'), (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Финал')));

    # Test data for judge_round_status
  - changeSet:
      id: 2025-10-08-16
      author: system
      context: test_data
      changes:
        - sql:
            sql: |
              INSERT INTO judge_round_status (judge_id, round_id, status) VALUES
              ((SELECT id FROM activity_user WHERE user_id = (select id from users where username = 'kevin') 
                  and activity_id = (select a.id from activity a where a.name = 'Соревнования категории Любители')), 
               (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Отборочный')), 'NOT_READY'),
              ((SELECT id FROM activity_user WHERE user_id = (select id from users where username = 'kevin') 
                  and activity_id = (select a.id from activity a where a.name = 'Соревнования категории Любители')), 
               (SELECT id FROM round WHERE name = 'Раунд 2' and milestone_id = (select id from milestone where name = 'Отборочный')), 'NOT_READY'),
              ((SELECT id FROM activity_user WHERE user_id = (select id from users where username = 'bogdan') 
                  and activity_id = (select a.id from activity a where a.name = 'Соревнования категории Любители')), 
               (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Отборочный')), 'NOT_READY'),
              ((SELECT id FROM activity_user WHERE user_id = (select id from users where username = 'bogdan') 
                  and activity_id = (select a.id from activity a where a.name = 'Соревнования категории Любители')), 
               (SELECT id FROM round WHERE name = 'Раунд 2' and milestone_id = (select id from milestone where name = 'Отборочный')), 'NOT_READY'),
              ((SELECT id FROM activity_user WHERE user_id = (select id from users where username = 'polina') 
                  and activity_id = (select a.id from activity a where a.name = 'Соревнования категории Любители')), 
               (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Отборочный')), 'NOT_READY'),
              ((SELECT id FROM activity_user WHERE user_id = (select id from users where username = 'polina') 
                  and activity_id = (select a.id from activity a where a.name = 'Соревнования категории Любители')), 
               (SELECT id FROM round WHERE name = 'Раунд 2' and milestone_id = (select id from milestone where name = 'Отборочный')), 'NOT_READY'),
              ((SELECT id FROM activity_user WHERE user_id = (select id from users where username = 'masha') 
                  and activity_id = (select a.id from activity a where a.name = 'Соревнования категории Любители')), 
               (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Отборочный')), 'NOT_READY'),
              ((SELECT id FROM activity_user WHERE user_id = (select id from users where username = 'masha') 
                  and activity_id = (select a.id from activity a where a.name = 'Соревнования категории Любители')), 
               (SELECT id FROM round WHERE name = 'Раунд 2' and milestone_id = (select id from milestone where name = 'Отборочный')), 'NOT_READY'),

              ((SELECT id FROM activity_user WHERE user_id = (select id from users where username = 'kevin') 
                  and activity_id = (select a.id from activity a where a.name = 'Соревнования категории Любители')), 
               (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Финал')), 'NOT_READY'),
              ((SELECT id FROM activity_user WHERE user_id = (select id from users where username = 'bogdan') 
                  and activity_id = (select a.id from activity a where a.name = 'Соревнования категории Любители')), 
               (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Финал')), 'NOT_READY'),
              ((SELECT id FROM activity_user WHERE user_id = (select id from users where username = 'polina') 
                  and activity_id = (select a.id from activity a where a.name = 'Соревнования категории Любители')), 
               (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Финал')), 'NOT_READY'),
              ((SELECT id FROM activity_user WHERE user_id = (select id from users where username = 'masha') 
                  and activity_id = (select a.id from activity a where a.name = 'Соревнования категории Любители')), 
               (SELECT id FROM round WHERE name = 'Раунд 1' and milestone_id = (select id from milestone where name = 'Финал')), 'NOT_READY');
